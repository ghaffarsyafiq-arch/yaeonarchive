<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overall Ranking - Blok 1.2 with Trend Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Poppins', sans-serif; 
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        /* BACKGROUND MESH: Blue Ocean & Red Wine */
        .mesh-background {
            background-color: #0f172a;
            background-image: 
                radial-gradient(at 0% 0%, rgba(20, 80, 160, 0.6) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(136, 19, 55, 0.5) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(100, 20, 40, 0.6) 0px, transparent 50%),
                radial-gradient(at 0% 100%, rgba(30, 64, 175, 0.5) 0px, transparent 50%),
                radial-gradient(at 50% 50%, rgba(15, 23, 42, 0.8) 0px, transparent 50%);
            background-attachment: fixed;
            background-size: cover;
        }

        /* GLASS CARD STYLING */
        .glass-card {
            background: rgba(255, 255, 255, 0.07);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .glass-card:hover {
            transform: translateY(-5px) scale(1.02);
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.4);
        }

        /* PODIUM ANIMATION */
        .podium-1 { margin-bottom: 2.5rem; z-index: 10; border-color: rgba(250, 204, 21, 0.5); background: rgba(250, 204, 21, 0.1); }
        .podium-2 { margin-bottom: -1rem; z-index: 5; }
        .podium-3 { margin-bottom: -3rem; z-index: 1; }
        
        @media (max-width: 768px) {
            .podium-1, .podium-2, .podium-3 { margin-bottom: 1rem; }
        }

        /* BADGES */
        .badge-title { font-size: 0.7rem; letter-spacing: 0.05em; text-transform: uppercase; font-weight: 700; padding: 0.25rem 0.5rem; border-radius: 9999px; border: 1px solid; display: inline-flex; align-items: center; gap: 0.25rem; }
        .bg-apex { background: rgba(234, 179, 8, 0.2); color: #fef08a; border-color: rgba(234, 179, 8, 0.4); }
        .bg-ace { background: rgba(244, 63, 94, 0.2); color: #fecdd3; border-color: rgba(244, 63, 94, 0.4); }
        .bg-genius { background: rgba(167, 139, 250, 0.2); color: #ddd6fe; border-color: rgba(167, 139, 250, 0.4); }
        .bg-smart { background: rgba(56, 189, 248, 0.2); color: #bae6fd; border-color: rgba(56, 189, 248, 0.4); }

        /* TREND INDICATORS */
        .trend-up { color: #34d399; background: rgba(52, 211, 153, 0.1); }
        .trend-down { color: #f43f5e; background: rgba(244, 63, 94, 0.1); }
        .trend-same { color: #94a3b8; background: rgba(148, 163, 184, 0.1); }

        /* MODAL */
        #modal.show { opacity: 1; pointer-events: auto; }
        #modal-content { transform: scale(0.95); transition: transform 0.3s ease; }
        #modal.show #modal-content { transform: scale(1); }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="mesh-background text-gray-100">

    <!-- Header -->
    <header class="sticky top-0 z-40 backdrop-blur-xl bg-black/30 border-b border-white/10 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center space-x-4">
                <div class="p-2.5 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl shadow-lg shadow-blue-900/50">
                    <i class="fa-solid fa-dna text-2xl text-white"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-200 to-purple-200">Blok 1.2: Introducing to Human Body</h1>
                    <p class="text-xs text-gray-400 font-medium tracking-wide">LEADERBOARD & TREND ANALYSIS</p>
                </div>
            </div>
            
            <!-- Search Bar -->
            <div class="relative w-full md:w-80 group">
                <input type="text" id="searchInput" class="w-full bg-white/5 border border-white/10 rounded-full py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all group-hover:bg-white/10" placeholder="Cari Nama, NIM, atau Gelar...">
                <i class="fa-solid fa-search absolute left-3.5 top-3 text-gray-500 group-hover:text-blue-400 transition-colors"></i>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">

        <!-- PODIUM SECTION (The Big Three) -->
        <section id="podium-container" class="relative pt-10">
            <!-- Injected by JS -->
        </section>

        <!-- STATS & LEGEND -->
        <section class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="glass-card p-4 rounded-xl flex items-center justify-between">
                <div>
                    <p class="text-xs text-gray-400 uppercase">Total Students</p>
                    <p class="text-2xl font-bold text-white">176</p>
                </div>
                <div class="h-10 w-10 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400"><i class="fa-solid fa-users"></i></div>
            </div>
            <div class="glass-card p-4 rounded-xl flex items-center justify-between">
                <div>
                    <p class="text-xs text-gray-400 uppercase">Highest Score</p>
                    <p class="text-2xl font-bold text-yellow-400">92.61</p>
                </div>
                <div class="h-10 w-10 rounded-full bg-yellow-500/20 flex items-center justify-center text-yellow-400"><i class="fa-solid fa-trophy"></i></div>
            </div>
            
            <!-- Trend Stats -->
            <div class="glass-card p-4 rounded-xl flex flex-col justify-center">
                <p class="text-[10px] text-gray-400 uppercase mb-1 tracking-wider">Trend vs Blok 1.1</p>
                <div class="flex items-center gap-3">
                    <div class="flex items-center gap-1 text-emerald-400 text-xs font-bold bg-emerald-500/10 px-2 py-1 rounded">
                        <i class="fa-solid fa-arrow-up"></i> Naik
                    </div>
                    <div class="flex items-center gap-1 text-rose-400 text-xs font-bold bg-rose-500/10 px-2 py-1 rounded">
                        <i class="fa-solid fa-arrow-down"></i> Turun
                    </div>
                </div>
            </div>

            <div class="glass-card p-4 rounded-xl flex flex-col justify-center">
                <p class="text-xs text-gray-400 uppercase mb-2">Legend</p>
                <div class="flex gap-2 text-[10px]">
                    <span class="px-2 py-1 rounded bg-yellow-500/20 text-yellow-200 border border-yellow-500/30">Apex</span>
                    <span class="px-2 py-1 rounded bg-red-500/20 text-red-200 border border-red-500/30">Ace</span>
                    <span class="px-2 py-1 rounded bg-purple-500/20 text-purple-200 border border-purple-500/30">Genius</span>
                </div>
            </div>
        </section>

        <!-- MAIN GRID (The Rest) -->
        <section>
            <div class="flex justify-between items-end mb-6">
                <h2 class="text-xl font-bold text-white flex items-center">
                    <i class="fa-solid fa-list-ul mr-2 text-blue-500"></i> All Ranks & Trends
                </h2>
                <span class="text-xs text-gray-500 italic">Comparison with Blok 1.1</span>
            </div>
            
            <div id="student-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Cards Injected Here -->
            </div>
            
            <!-- Not Found State -->
            <div id="not-found" class="hidden text-center py-20">
                <i class="fa-solid fa-ghost text-4xl text-gray-600 mb-4"></i>
                <p class="text-gray-500">No student found matching that query.</p>
            </div>
        </section>

    </main>

    <!-- MODAL -->
    <div id="modal" class="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-300">
        <div id="modal-content" class="bg-[#1e293b] w-full max-w-4xl rounded-2xl border border-white/10 shadow-2xl overflow-hidden flex flex-col md:flex-row relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white z-10">
                <i class="fa-solid fa-times text-2xl"></i>
            </button>
            
            <!-- Left Side: Info -->
            <div class="w-full md:w-2/5 p-8 bg-gradient-to-br from-[#0f172a] to-[#1e293b] border-r border-white/5 flex flex-col justify-center">
                <div id="modal-rank-badge" class="inline-block px-3 py-1 rounded-full bg-blue-600/30 text-blue-300 text-xs font-bold mb-4 w-max border border-blue-500/30">
                    RANK #1
                </div>
                <h2 id="modal-name" class="text-2xl font-bold text-white mb-1 leading-tight">Name Here</h2>
                <p id="modal-nim" class="text-sm text-gray-400 font-mono mb-6">NIM</p>
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-white/5 p-3 rounded-lg text-center">
                        <span class="text-[10px] text-gray-400 uppercase block">Nilai Akhir</span>
                        <span id="modal-na" class="text-2xl font-bold text-white">00.00</span>
                    </div>
                    <div class="bg-white/5 p-3 rounded-lg text-center">
                        <span class="text-[10px] text-gray-400 uppercase block">Grade</span>
                        <span id="modal-grade" class="text-2xl font-bold text-green-400">A</span>
                    </div>
                </div>

                <div id="modal-trend" class="mb-4">
                    <!-- Trend injected here -->
                </div>

                <div id="modal-titles" class="flex flex-wrap gap-2">
                    <!-- Titles injected here -->
                </div>
            </div>

            <!-- Right Side: Chart -->
            <div class="w-full md:w-3/5 p-6 bg-[#1e293b] flex flex-col items-center justify-center relative">
                <h3 class="text-sm font-semibold text-gray-400 mb-4 uppercase tracking-wider">Skill Breakdown</h3>
                <div class="w-full h-64 md:h-80 relative">
                    <canvas id="spiderwebChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. DATA MASTER ---
        
        // Name Map
        const nameMap = {
            "G1A025001": "MUSTIKA ZHAFARINA", "G1A025002": "ANINDITA RAHMAZYANTI", "G1A025003": "RONALD JASON NOVIANTO", "G1A025004": "WANDA WIDYASWARA", "G1A025005": "NATASYA PUTRI AZALIA", "G1A025006": "ALIF MUHAMMAD SATRIAS", "G1A025007": "ANGGUN SEKAR AMALIA", "G1A025008": "MUHAMMAD RIZKI MAULANA", "G1A025009": "IVANA WIDYA PARAMITA", "G1A025010": "MIFTAKHUL RIZKY ALWI ZAKARIA", "G1A025011": "RIFA AFRIANTI PRIMANTO", "G1A025012": "ARZETA HAFIFATUZZAHROH", "G1A025013": "ALYSA ILMI AULIA", "G1A025014": "NURUL UZMA ARIFINIANTI", "G1A025015": "NASHWA RIHADATUL 'AISY", "G1A025016": "HAIBA ZAHWA ADNINDYA ZIEN", "G1A025017": "ARKAAN ARRASYID S", "G1A025018": "ANDHIKA NUR HAKIM", "G1A025019": "ILHAM RAMADHAN TAUFIQ", "G1A025020": "SYIFA AULIA WIDIANA", "G1A025021": "NAYRAH BARIZKY RITONGA", "G1A025022": "NATASYA AURA PUTRI AHMAD", "G1A025023": "LUTHFI FADHILAH FATURAHMAN", "G1A025024": "NABILA QURROTA A'INI", "G1A025025": "LOVINA DINA KAMILA", "G1A025026": "AVELIKA LADYSA SHANETIN", "G1A025027": "SHARFINA AURIZMA TITANIA WARDANI", "G1A025028": "RAFI HAZZA SAPUTRA", "G1A025029": "FATWA DINATA", "G1A025030": "REZA HARUN", "G1A025031": "AZKIYA HUSNABILA", "G1A025032": "DAVINA NATTAYA KOMARA", "G1A025033": "MARIA CATHLEEN LIEM", "G1A025034": "AYU WULAN PUTRIANA", "G1A025035": "KEISYA BEAUTY STANZA", "G1A025036": "MU'AFA NAZHMIR ROBBANI", "G1A025037": "ZAWA HASNA' ZAHIDAH", "G1A025038": "ANWA FATHIMA BIDZIKRI", "G1A025039": "MYCHA NAZILA SYAKIROH", "G1A025040": "MUHAMMAD RAFI' NAUFAREL", "G1A025041": "BATRISYIA ATHA RINDRA JAFNI", "G1A025042": "NAILA FIRDAUZI HARYADINA PUTRI", "G1A025043": "ASIYAH", "G1A025044": "KHANSA JAHFALATHA BALQIS", "G1A025045": "NASYWA AMANIA HIDAYAT", "G1A025046": "MONICA SANCI KONDAWE", "G1A025047": "MUHAMMAD ALRIZA NASUTION", "G1A025048": "HANIFA", "G1A025049": "RIFQAH ZULFA AFANIN", "G1A025050": "MUHAMMAD NAUVAL PANJI AL HAKIM", "G1A025051": "AMIRA BALQIS ASSABA", "G1A025052": "CLAIRINE ZERLINA HANIFAH", "G1A025053": "CHRISTIAN PRAJADI", "G1A025054": "ALFI NISA DAMAYANTI", "G1A025055": "VANISSA FATHIAH ARDANI", "G1A025056": "SIGIT PRAMBUDI DIENTI", "G1A025057": "MUHAMMAD UZAIR ABDILLAH", "G1A025059": "MAYCO CAHYA TRI ADINANSYAH", "G1A025060": "NADIA CHERYL", "G1A025061": "NADIA CHAIRUNNISA OLIA PUTRI", "G1A025062": "LOKANANTA ARKIE AMSAL", "G1A025063": "M.DANAR RAMADHAN TARUNA", "G1A025064": "RAZITA KHAIRINA PRASAJA MARPAUNG", "G1A025065": "IRSYAD WAHYU MUHARROM", "G1A025066": "INGRID GAYATRI", "G1A025067": "FADHILAH AZKA AFKARINA", "G1A025068": "GABRIEL DANENDRA SETYAWAN", "G1A025069": "AMILAH AMATURRAHIM AL MUJAHIDAH", "G1A025070": "FARID HAMZAH PUTRA PRATAMA", "G1A025071": "JAMES SUDIANTO RACHMAPUTRA", "G1A025072": "KHAIRUNNISA AZKA FADILA", "G1A025073": "ISYRAFUDDIN ABDUN YASYKUR", "G1A025074": "TSALITSA AFIFAH NIDAUL HAQ", "G1A025075": "AISYAH NUR AZIZAH", "G1A025076": "WAHYUDI", "G1A025077": "KAUTSAR PANDYA RAHADYAN", "G1A025078": "CHRISTIAN ALLAN", "G1A025079": "I DEWA AYU MADE SHINTA ANGELINA", "G1A025080": "DZAKI AMRU SYAFI", "G1A025081": "NAURA PUTRI ALEXANDRIA", "G1A025082": "ARKAN FAWWAZ INDARJO", "G1A025083": "GHANIA NAILA NOOR DZAKIYYAH", "G1A025084": "ANINDYA SAFIRA RIYANTO", "G1A025086": "UTHI FIDELA SALWA", "G1A025087": "AUFADHIYA KHAIRANI PUTRI", "G1A025088": "HANUM PRIMANDA KHAIRUNNISA", "G1A025089": "IKA WIDIASTUTI", "G1A025091": "CLAUDIA ZAR'IN PUTRI JASMINE", "G1A025092": "SIXTEENOVA ARINI RAHMATIKA", "G1A025093": "AMEERA JASMINE ZAIN", "G1A025094": "NADYANDRA ARETHA MAIRITZA", "G1A025095": "NADINE PRAMESTHA ARDHANI", "G1A025096": "AMELIA AZZAHRA", "G1A025097": "RIFAT PRAMUDIA NASUTION", "G1A025098": "JAHFAL AL FARISI", "G1A025099": "ISTAVANIA NADIA MUFID", "G1A025100": "RISTY PUTERI KUSUMA MAHARDIKANINGSIH", "G1A025101": "CHELSEA ICHA PUTRI ANZANI", "G1A025102": "DZAKWAN HAMMAM NAWAWI", "G1A025103": "YAZMINE", "G1A025104": "MAULIDIA ZULFA KARTIKA", "G1A025105": "SAVANA RIZKY PURNAMA", "G1A025106": "YASMIN TAQIYAH TAMBUNAN", "G1A025107": "NACHAYA AROFAHNI WIJAYA", "G1A025108": "FRIDA MULIADEWI CHAERANI", "G1A025109": "GHANIY HILDAN RABBANI", "G1A025110": "ALTAF FIAN JUNINDA", "G1A025111": "FADELLA AZZAHRA", "G1A025112": "HANINDITA NASTITI AYUNINGTIAS", "G1A025113": "TYANAYA RAHMA", "G1A025114": "CHINTYA PUTRI NABILAH", "G1A025115": "AISYA NURLANGIT FITRI", "G1A025116": "AVISA ZANDRA CITAGAMI", "G1A025117": "FIQYA SULISTIANI", "G1A025118": "RAHMA GRISELDA INDRASTATA", "G1A025119": "KHESYIA NAFIA ATMOKO", "G1A025120": "QAFFAL ZIAN QADSI", "G1A025121": "AMIRA AZALIA", "G1A025122": "MUHAMMAD RASYID SURYA WICAKSONO", "G1A025123": "NAURA ALYA FASHIHA", "G1A025124": "BUNGA PUTRI ANGGINA", "G1A025125": "M. ANDHIKA PUTRA PRATAMA", "G1A025126": "HANENDI FAREL SANTAUSO", "G1A025127": "JOVITA BERNADINE AZALIA DWIASTHI", "G1A025128": "RAISHA AQILA ARDANU", "G1A025129": "NAZLA RIFDA AQILLAH", "G1A025130": "SYAFIQ ATAULLAH GHAFFAR", "G1A025131": "ZIDAN ADI HENDRIK TRI PUTRA", "G1A025132": "FADHEL MUHAMMAD AIHAM", "G1A025133": "AISYAH LOVIA ZAHRA ROCHMANA", "G1A025134": "BAGAS ARIEF SETYA WARDANA", "G1A025135": "KHAMIDYA SAFIRA", "G1A025136": "RIKO RAHARDIAN PUTRA WARDANA", "G1A025138": "TITEN WIGUNA", "G1A025139": "FANISA MAULIDA RAHARJA", "G1A025140": "DWINANDA FITRIANA PUTRI", "G1A025141": "BERMASAUT ADIPUTRA TAMPUBOLON", "G1A025142": "ZASKIA YUFLIHA ALYA NISA", "G1A025143": "SYAHRU SYABANA SETIYANTO", "G1A025144": "NISRINA ATIRA AFLAH GUNNARTO", "G1A025145": "HASAN TRI GUNAWAN", "G1A025146": "NADHIRA YUSTRINA", "G1A025147": "WAHYU CAN ARUM PUTRI RAMBIATI", "G1A025148": "ARSELAN RIZQY DARMAWAN", "G1A025149": "NARDIIN FATHIYYAH SUNYOTO", "G1A025150": "AQBIL REZKY BUNAYYA", "G1A025151": "MUHAMMAD THORIQ AL ROSYID", "G1A025152": "RAFI DINAN AL FARISI", "G1A025153": "MUHAMMAD FARRELL ARCHARD ZHAFIF SUCIPTO", "G1A025154": "JOSEPHINE MELYNA EVANY ESTAFANA", "G1A025155": "GAFIN AULIA RAHARJO", "G1A025156": "CLEARY SHAYNA HANIN", "G1A025157": "RAZZA RASENDRIYA NANDANA ARDI", "G1A025159": "KEYSHA FAUSTA ZAINI", "G1A025160": "NADIYA BINTANG RAZIA NIKO", "G1A025161": "MOH. ILHAM ARDIATSYAH", "G1A025163": "ASTRELLA AIMEE KHOIRUNNISA", "G1A025164": "ATHIFATUL JANNAH", "G1A025165": "MUHAMMAD SYAFIEQ ADZKA", "G1A025166": "SYIFA NURJANAH", "G1A025167": "DIMAS ZAHRAN HERDYASSAGAF", "G1A025168": "FARREL MOZA DHIYAUL HAQ", "G1A025169": "REECHARD BURHANUDIN FUADY", "G1A025170": "ADDINI FATMA ARINI", "G1A025171": "HANIN NAURA FARIHA", "G1A025172": "AHMAD ABDUL HAQQI", "G1A025174": "AHMAD MUQORROBIN", "G1A025175": "AKBAR BAGUS SRI ZENA", "G1A025176": "RAFID NAUFAL NURIMANUZAKI"
        };

        // --- PREVIOUS BLOCK (1.1) DATA FOR TREND ANALYSIS ---
        // Raw Data extracted from Block 1.1 File
        const block11RawData = `
        G1A025001,56.00,78.75,83.13,92.42,80.89,90.00,73.49
        G1A025002,69.30,84.58,83.13,88.75,82.00,97.00,79.65
        G1A025003,62.70,87.08,85.63,86.80,82.42,82.00,76.64
        G1A025004,68.00,85.83,91.25,86.56,80.73,94.00,79.54
        G1A025005,56.00,87.08,95.00,80.81,78.00,75.00,73.13
        G1A025006,78.00,76.25,80.63,83.44,80.28,89.00,79.66
        G1A025007,58.00,78.33,86.25,95.47,81.17,82.00,74.74
        G1A025008,63.35,81.67,86.25,94.95,76.06,74.00,76.79
        G1A025009,70.70,88.33,91.88,88.75,80.03,95.00,81.64
        G1A025010,72.70,85.00,91.88,96.30,79.06,82.00,82.58
        G1A025011,58.70,83.33,83.13,93.67,85.11,90.00,75.95
        G1A025012,70.65,78.75,88.75,83.47,80.28,86.00,77.89
        G1A025013,84.65,87.50,91.25,90.63,85.03,89.00,87.31
        G1A025014,78.00,85.00,88.75,90.55,85.69,86.00,83.77
        G1A025015,74.65,78.33,80.63,95.27,80.89,92.00,81.29
        G1A025016,80.70,87.08,94.38,92.03,85.89,92.00,86.43
        G1A025017,77.35,87.08,88.75,81.80,76.00,68.00,80.79
        G1A025018,67.35,88.33,80.00,88.44,80.75,88.00,78.73
        G1A025019,44.00,83.75,77.50,85.64,78.91,70.00,66.67
        G1A025020,65.30,82.92,100.00,85.94,78.00,82.00,77.89
        G1A025021,60.00,85.83,86.25,94.06,81.25,90.00,77.17
        G1A025022,62.00,81.25,88.75,96.65,71.14,75.00,76.56
        G1A025023,64.00,82.92,88.75,97.27,83.67,97.00,79.54
        G1A025024,56.00,85.00,83.75,83.07,78.33,85.00,72.56
        G1A025025,85.35,87.08,83.13,89.92,82.75,76.00,85.79
        G1A025026,68.00,80.83,83.13,94.69,79.28,85.00,78.83
        G1A025027,68.70,87.08,88.75,90.86,84.14,91.00,80.70
        G1A025028,75.30,81.67,94.38,86.48,80.47,89.00,81.66
        G1A025029,81.35,88.33,84.38,85.02,85.64,85.00,84.18
        G1A025030,56.00,81.67,85.00,88.75,81.75,85.00,73.32
        G1A025031,80.65,87.08,94.38,90.86,75.69,91.00,85.62
        G1A025032,63.35,86.25,94.38,85.24,80.00,83.00,77.23
        G1A025033,66.00,85.00,91.25,97.00,79.14,76.00,79.68
        G1A025034,56.00,74.17,83.13,79.56,78.14,80.00,69.36
        G1A025035,74.00,85.00,91.88,97.77,83.67,97.00,84.37
        G1A025036,56.00,77.08,77.50,82.93,84.61,84.00,70.58
        G1A025037,64.65,76.67,80.63,82.34,79.86,83.00,73.87
        G1A025038,58.70,87.08,85.63,79.96,78.00,72.00,72.95
        G1A025039,59.30,80.42,86.25,95.21,80.92,82.00,75.62
        G1A025040,70.65,78.75,78.13,94.45,79.22,84.00,78.87
        G1A025041,67.35,82.50,96.88,92.58,82.75,86.00,80.08
        G1A025042,74.70,81.67,86.25,95.30,81.47,86.00,82.27
        G1A025043,54.00,85.42,88.75,90.08,80.36,78.00,73.49
        G1A025044,62.00,82.92,100.00,85.08,74.89,85.00,76.39
        G1A025045,83.35,78.33,83.13,96.05,80.61,84.00,84.76
        G1A025046,56.00,82.92,83.13,83.83,79.44,77.00,71.88
        G1A025047,59.35,84.58,88.75,84.69,80.42,90.00,74.99
        G1A025048,69.35,78.33,83.13,95.03,79.33,83.00,78.84
        G1A025049,69.35,83.75,95.00,97.20,83.67,95.00,82.36
        G1A025050,46.00,78.33,83.13,92.60,76.31,80.00,68.72
        G1A025051,69.30,91.67,96.88,90.63,84.50,90.00,82.59
        G1A025052,75.35,77.92,88.75,86.23,84.17,86.00,80.35
        G1A025053,62.00,80.42,88.75,93.05,83.44,85.00,76.79
        G1A025054,77.35,84.17,100.00,97.89,79.22,82.00,85.41
        G1A025055,68.00,89.58,95.00,97.70,83.67,97.00,83.19
        G1A025056,71.35,87.08,94.38,80.24,78.00,70.00,78.84
        G1A025057,71.30,74.58,74.38,84.67,83.14,87.00,76.32
        G1A025059,70.65,87.08,88.75,88.34,84.08,85.00,80.67
        G1A025060,72.65,87.08,97.50,97.84,83.67,97.00,84.83
        G1A025061,76.70,89.58,96.88,94.22,85.25,85.00,85.64
        G1A025062,73.30,89.58,93.75,88.75,79.81,90.00,82.85
        G1A025063,68.70,86.25,89.38,83.44,78.00,78.00,78.16
        G1A025064,78.00,90.42,88.75,94.14,83.58,85.00,85.42
        G1A025065,78.65,79.58,78.13,95.54,81.33,87.00,82.71
        G1A025066,57.35,81.67,88.75,96.22,79.08,75.00,75.10
        G1A025067,71.30,75.83,86.25,85.10,84.14,88.00,77.94
        G1A025068,84.00,86.25,88.75,90.55,83.64,86.00,86.32
        G1A025069,69.35,87.08,88.75,80.38,76.00,67.00,77.26
        G1A025070,56.00,84.58,75.63,87.34,82.75,82.00,72.59
        G1A025071,77.30,80.00,84.38,94.22,82.28,77.00,82.17
        G1A025072,76.65,83.33,80.63,88.13,82.03,90.00,81.62
        G1A025073,68.00,77.50,80.63,81.41,74.14,82.00,74.85
        G1A025074,66.00,91.67,86.25,88.75,81.81,90.00,79.70
        G1A025075,58.70,80.83,94.38,93.91,83.81,82.00,76.16
        G1A025076,68.00,78.33,86.25,93.73,73.31,86.00,78.20
        G1A025077,70.70,77.50,71.88,92.52,72.86,61.00,76.16
        G1A025078,77.30,78.33,88.75,95.47,80.61,77.00,82.44
        G1A025079,73.35,79.58,88.75,94.26,81.28,84.00,81.25
        G1A025080,76.65,87.08,91.25,91.33,84.25,82.00,83.78
        G1A025081,70.70,88.33,81.25,92.50,80.75,81.00,80.66
        G1A025082,70.00,85.00,88.75,95.61,78.94,74.00,80.64
        G1A025083,68.65,80.83,97.50,92.58,80.75,81.00,79.98
        G1A025084,75.35,88.33,91.88,90.47,80.50,82.00,83.21
        G1A025086,66.00,89.58,88.75,85.00,80.00,85.00,78.44
        G1A025087,65.35,81.67,86.25,87.34,74.66,87.00,76.65
        G1A025088,75.35,90.42,94.38,88.75,82.03,95.00,84.26
        G1A025089,77.30,89.58,95.00,94.57,79.08,64.00,84.40
        G1A025091,84.70,82.92,95.00,90.23,84.36,78.00,86.13
        G1A025092,77.35,93.75,100.00,91.33,83.50,89.00,86.58
        G1A025093,76.70,76.67,83.13,93.13,80.94,85.00,81.25
        G1A025094,66.65,82.92,96.88,85.94,80.33,81.00,78.19
        G1A025095,76.00,84.17,95.00,92.27,80.75,82.00,83.32
        G1A025096,70.00,82.92,97.50,97.49,83.67,91.00,82.56
        G1A025097,66.00,88.33,94.38,95.64,81.86,95.00,81.48
        G1A025098,64.00,87.08,86.25,87.10,78.61,89.00,77.44
        G1A025099,70.70,77.08,83.75,84.41,82.86,84.00,77.30
        G1A025100,77.35,84.17,88.75,95.47,82.36,84.00,84.06
        G1A025101,56.00,87.08,91.25,81.09,78.00,72.00,72.66
        G1A025102,78.70,87.50,91.25,93.20,78.81,84.00,84.89
        G1A025103,68.70,93.75,95.00,91.09,83.50,91.00,82.67
        G1A025104,80.70,86.25,94.38,95.47,83.19,87.00,86.57
        G1A025105,76.65,79.58,75.63,83.28,80.14,84.00,79.00
        G1A025106,75.35,83.75,88.75,86.58,85.44,89.00,81.80
        G1A025107,59.35,82.92,88.75,84.45,79.72,82.00,74.18
        G1A025108,72.00,80.42,83.13,95.47,80.06,78.00,80.19
        G1A025109,69.35,83.75,85.63,84.41,82.94,86.00,78.38
        G1A025110,70.00,89.58,92.50,90.31,82.97,85.00,81.63
        G1A025111,68.00,82.92,94.38,83.75,78.33,80.00,77.89
        G1A025112,68.65,93.75,92.92,84.69,80.69,83.00,80.62
        G1A025113,68.00,93.75,100.00,82.27,76.00,75.00,79.95
        G1A025114,70.00,83.13,89.17,81.25,80.14,85.00,78.05
        G1A025115,70.00,83.75,88.75,95.47,76.72,87.00,80.90
        G1A025116,66.70,88.33,86.25,95.66,80.06,80.00,80.11
        G1A025117,56.00,82.92,83.13,96.28,79.58,74.00,74.23
        G1A025118,69.30,84.17,97.50,97.00,78.81,73.00,81.29
        G1A025119,59.30,93.75,93.75,84.61,78.61,85.00,76.95
        G1A025120,62.70,82.08,86.25,96.30,79.14,74.00,77.04
        G1A025121,60.00,87.08,94.38,88.75,82.03,95.00,77.46
        G1A025122,50.65,62.92,66.00,90.06,76.16,80.00,65.26
        G1A025123,70.00,88.33,82.50,95.38,76.06,79.00,80.75
        G1A025124,60.65,93.75,87.08,93.05,79.11,86.00,78.58
        G1A025125,74.00,82.92,83.13,86.24,80.00,79.00,79.69
        G1A025126,58.00,84.17,80.63,96.99,82.53,95.00,76.37
        G1A025127,56.00,84.58,88.13,84.15,83.67,85.00,73.39
        G1A025128,62.00,86.25,81.67,93.69,76.89,84.00,77.00
        G1A025129,62.00,77.92,100.00,96.13,79.08,71.00,77.11
        G1A025130,56.00,93.75,88.75,79.67,72.00,67.00,72.91
        G1A025131,72.70,87.50,91.67,84.96,76.56,84.00,80.77
        G1A025132,56.00,80.83,86.25,94.25,82.44,80.00,74.16
        G1A025133,72.00,93.75,100.00,81.52,78.00,68.00,81.15
        G1A025134,64.65,79.17,80.63,89.77,66.44,72.00,74.63
        G1A025135,72.00,84.17,76.88,97.49,80.92,97.00,81.71
        G1A025136,60.65,81.67,91.88,88.75,79.78,95.00,76.27
        G1A025138,60.00,89.58,100.00,95.95,75.06,71.00,78.41
        G1A025139,68.65,93.75,100.00,80.81,78.00,75.00,80.02
        G1A025140,58.65,85.42,87.50,88.05,79.22,84.00,75.06
        G1A025141,56.00,81.67,78.13,97.06,83.11,97.00,74.96
        G1A025142,66.65,82.92,91.88,86.33,78.46,90.00,78.12
        G1A025143,76.00,85.83,91.88,83.28,87.81,87.00,82.15
        G1A025144,56.00,89.58,93.75,91.51,83.42,91.00,76.71
        G1A025145,79.30,82.92,82.50,91.94,83.89,89.00,83.59
        G1A025146,65.30,89.38,93.33,82.81,80.00,82.00,77.99
        G1A025147,69.35,81.67,94.38,95.18,80.06,80.00,80.55
        G1A025148,71.35,85.83,83.13,94.77,79.22,70.00,80.44
        G1A025149,67.35,93.75,77.50,95.18,81.44,90.00,81.05
        G1A025150,56.00,83.75,86.25,86.48,80.00,63.00,72.22
        G1A025151,61.35,82.92,88.75,92.27,80.75,82.00,76.59
        G1A025152,61.35,89.58,100.00,90.47,82.36,80.00,78.67
        G1A025153,62.70,78.33,83.13,95.38,82.17,84.00,76.44
        G1A025154,62.65,85.83,91.25,93.13,80.89,88.00,78.42
        G1A025155,75.35,85.00,91.25,93.67,81.64,84.00,83.28
        G1A025156,56.00,82.92,88.75,88.75,81.83,85.00,73.95
        G1A025157,60.00,84.17,86.25,83.83,80.26,89.00,74.69
        G1A025159,64.65,71.67,95.00,97.11,78.94,65.00,76.31
        G1A025160,74.70,87.08,88.13,98.06,83.67,97.00,84.75
        G1A025161,55.30,89.38,75.42,80.23,75.72,78.00,71.27
        G1A025162,26.65,18.75,0.00,78.52,69.67,0.00,33.60
        G1A025163,71.35,89.58,100.00,81.45,74.00,70.00,79.95
        G1A025164,56.00,83.75,94.38,84.39,80.00,73.00,73.12
        G1A025165,76.00,90.63,93.33,94.19,81.14,88.00,85.15
        G1A025166,62.65,89.58,100.00,90.39,82.36,81.00,79.22
        G1A025167,46.00,81.67,75.00,91.72,76.44,72.00,68.00
        G1A025168,66.65,86.25,91.88,88.58,82.06,90.00,79.42
        G1A025169,57.30,89.58,62.50,90.47,81.26,78.00,73.14
        G1A025170,48.00,80.42,88.13,85.47,80.47,90.00,69.71
        G1A025171,56.00,83.75,85.63,89.30,80.71,67.00,72.96
        G1A025172,56.00,77.08,77.50,94.06,75.64,72.00,71.76
        G1A025173,66.00,83.75,94.38,95.03,83.33,82.00,79.86
        G1A025174,66.65,82.92,82.50,80.24,78.00,70.00,74.94
        G1A025175,58.00,85.00,83.13,85.10,78.00,73.00,73.08
        G1A025176,67.30,86.25,88.75,86.97,80.57,90.00,78.97
        `;

        // Parse Block 1.1 Data to get Ranks
        const block11Ranks = {};
        
        // Helper to parse CSV
        const parseBlock11 = () => {
            let data = [];
            block11RawData.trim().split('\n').forEach(line => {
                const parts = line.trim().split(',');
                if(parts.length >= 8) {
                    data.push({
                        nim: parts[0].trim(),
                        na: parseFloat(parts[7])
                    });
                }
            });
            // Sort Descending
            data.sort((a, b) => b.na - a.na);
            // Assign Rank
            data.forEach((s, index) => {
                // Handle ties
                if (index > 0 && data[index].na === data[index - 1].na) {
                    block11Ranks[s.nim] = block11Ranks[data[index - 1].nim];
                } else {
                    block11Ranks[s.nim] = index + 1;
                }
            });
        };
        
        parseBlock11(); // Execute

        // --- BLOCK 1.2 DATA ---
        const rankingData = [
            { nim: "G1A025025", na: 92.61, grade: "A" },
            { nim: "G1A025017", na: 87.29, grade: "A" },
            { nim: "G1A025045", na: 86.43, grade: "A" },
            { nim: "G1A025078", na: 85.61, grade: "A" },
            { nim: "G1A025029", na: 85.25, grade: "A" },
            { nim: "G1A025031", na: 85.14, grade: "A" },
            { nim: "G1A025095", na: 84.93, grade: "A" },
            { nim: "G1A025013", na: 84.12, grade: "A" },
            { nim: "G1A025006", na: 83.80, grade: "A" },
            { nim: "G1A025145", na: 83.79, grade: "A" },
            { nim: "G1A025105", na: 83.68, grade: "A" },
            { nim: "G1A025106", na: 82.67, grade: "A" },
            { nim: "G1A025068", na: 82.45, grade: "A" },
            { nim: "G1A025100", na: 81.30, grade: "A" },
            { nim: "G1A025014", na: 80.86, grade: "A" },
            { nim: "G1A025092", na: 80.61, grade: "A" },
            { nim: "G1A025012", na: 80.55, grade: "A" },
            { nim: "G1A025109", na: 78.84, grade: "B" },
            { nim: "G1A025055", na: 78.17, grade: "B" },
            { nim: "G1A025104", na: 77.60, grade: "B" },
            { nim: "G1A025054", na: 77.58, grade: "B" },
            { nim: "G1A025079", na: 77.41, grade: "B" },
            { nim: "G1A025016", na: 77.29, grade: "B" },
            { nim: "G1A025065", na: 77.10, grade: "B" },
            { nim: "G1A025135", na: 76.81, grade: "B" },
            { nim: "G1A025084", na: 76.64, grade: "B" },
            { nim: "G1A025018", na: 76.40, grade: "B" },
            { nim: "G1A025056", na: 75.87, grade: "B" },
            { nim: "G1A025113", na: 75.57, grade: "B" },
            { nim: "G1A025151", na: 75.47, grade: "B" },
            { nim: "G1A025010", na: 75.30, grade: "B" },
            { nim: "G1A025072", na: 75.11, grade: "B" },
            { nim: "G1A025108", na: 74.70, grade: "B" },
            { nim: "G1A025033", na: 74.73, grade: "B" },
            { nim: "G1A025110", na: 74.46, grade: "B" },
            { nim: "G1A025051", na: 74.33, grade: "B" },
            { nim: "G1A025114", na: 74.21, grade: "B" },
            { nim: "G1A025082", na: 73.87, grade: "B" },
            { nim: "G1A025028", na: 73.46, grade: "B" },
            { nim: "G1A025102", na: 73.13, grade: "B" },
            { nim: "G1A025080", na: 73.10, grade: "B" },
            { nim: "G1A025073", na: 72.58, grade: "B" },
            { nim: "G1A025148", na: 72.39, grade: "B" },
            { nim: "G1A025125", na: 72.13, grade: "B" },
            { nim: "G1A025027", na: 71.86, grade: "B" },
            { nim: "G1A025002", na: 71.69, grade: "B" },
            { nim: "G1A025112", na: 71.51, grade: "B" },
            { nim: "G1A025003", na: 71.01, grade: "B" },
            { nim: "G1A025041", na: 71.01, grade: "B" },
            { nim: "G1A025042", na: 71.01, grade: "B" },
            { nim: "G1A025048", na: 71.01, grade: "B" },
            { nim: "G1A025103", na: 71.01, grade: "B" },
            { nim: "G1A025115", na: 71.01, grade: "B" },
            { nim: "G1A025143", na: 71.01, grade: "B" },
            { nim: "G1A025173", na: 71.01, grade: "B" },
            { nim: "G1A025004", na: 70.92, grade: "B" },
            { nim: "G1A025087", na: 70.92, grade: "B" },
            { nim: "G1A025098", na: 70.92, grade: "B" },
            { nim: "G1A025155", na: 70.92, grade: "B" },
            { nim: "G1A025021", na: 70.83, grade: "B" },
            { nim: "G1A025061", na: 70.83, grade: "B" },
            { nim: "G1A025093", na: 70.83, grade: "B" },
            { nim: "G1A025154", na: 70.83, grade: "B" },
            { nim: "G1A025047", na: 70.75, grade: "B" },
            { nim: "G1A025089", na: 70.75, grade: "B" },
            { nim: "G1A025094", na: 70.75, grade: "B" },
            { nim: "G1A025111", na: 70.75, grade: "B" },
            { nim: "G1A025142", na: 70.75, grade: "B" },
            { nim: "G1A025121", na: 70.67, grade: "B" },
            { nim: "G1A025009", na: 70.66, grade: "B" },
            { nim: "G1A025153", na: 70.65, grade: "B" },
            { nim: "G1A025064", na: 70.57, grade: "B" },
            { nim: "G1A025118", na: 70.57, grade: "B" },
            { nim: "G1A025120", na: 70.57, grade: "B" },
            { nim: "G1A025128", na: 70.57, grade: "B" },
            { nim: "G1A025129", na: 70.57, grade: "B" },
            { nim: "G1A025138", na: 70.57, grade: "B" },
            { nim: "G1A025149", na: 70.57, grade: "B" },
            { nim: "G1A025026", na: 70.53, grade: "B" },
            { nim: "G1A025096", na: 70.53, grade: "B" },
            { nim: "G1A025030", na: 70.48, grade: "B" },
            { nim: "G1A025060", na: 70.48, grade: "B" },
            { nim: "G1A025062", na: 70.48, grade: "B" },
            { nim: "G1A025074", na: 70.48, grade: "B" },
            { nim: "G1A025081", na: 70.48, grade: "B" },
            { nim: "G1A025088", na: 70.48, grade: "B" },
            { nim: "G1A025136", na: 70.48, grade: "B" },
            { nim: "G1A025156", na: 70.48, grade: "B" },
            { nim: "G1A025168", na: 70.48, grade: "B" },
            { nim: "G1A025035", na: 70.44, grade: "B" },
            { nim: "G1A025040", na: 70.44, grade: "B" },
            { nim: "G1A025005", na: 70.41, grade: "B" },
            { nim: "G1A025038", na: 70.41, grade: "B" },
            { nim: "G1A025069", na: 70.41, grade: "B" },
            { nim: "G1A025101", na: 70.41, grade: "B" },
            { nim: "G1A025139", na: 70.41, grade: "B" },
            { nim: "G1A025163", na: 70.41, grade: "B" },
            { nim: "G1A025174", na: 70.41, grade: "B" },
            { nim: "G1A025001", na: 70.40, grade: "B" },
            { nim: "G1A025022", na: 70.40, grade: "B" },
            { nim: "G1A025049", na: 70.40, grade: "B" },
            { nim: "G1A025052", na: 70.40, grade: "B" },
            { nim: "G1A025071", na: 70.40, grade: "B" },
            { nim: "G1A025091", na: 70.40, grade: "B" },
            { nim: "G1A025116", na: 70.40, grade: "B" },
            { nim: "G1A025133", na: 70.34, grade: "B" },
            { nim: "G1A025067", na: 70.31, grade: "B" },
            { nim: "G1A025126", na: 70.31, grade: "B" },
            { nim: "G1A025134", na: 70.31, grade: "B" },
            { nim: "G1A025165", na: 70.31, grade: "B" },
            { nim: "G1A025020", na: 70.26, grade: "B" },
            { nim: "G1A025037", na: 70.26, grade: "B" },
            { nim: "G1A025044", na: 70.26, grade: "B" },
            { nim: "G1A025063", na: 70.26, grade: "B" },
            { nim: "G1A025086", na: 70.26, grade: "B" },
            { nim: "G1A025131", na: 70.26, grade: "B" },
            { nim: "G1A025150", na: 70.26, grade: "B" },
            { nim: "G1A025175", na: 70.26, grade: "B" },
            { nim: "G1A025075", na: 70.22, grade: "B" },
            { nim: "G1A025097", na: 70.18, grade: "B" },
            { nim: "G1A025057", na: 70.13, grade: "B" },
            { nim: "G1A025099", na: 70.13, grade: "B" },
            { nim: "G1A025147", na: 70.13, grade: "B" },
            { nim: "G1A025169", na: 70.13, grade: "B" },
            { nim: "G1A025015", na: 70.05, grade: "B" },
            { nim: "G1A025160", na: 70.05, grade: "B" },
            { nim: "G1A025008", na: 69.96, grade: "B" },
            { nim: "G1A025077", na: 69.96, grade: "B" },
            { nim: "G1A025130", na: 69.96, grade: "B" },
            { nim: "G1A025127", na: 69.77, grade: "B" },
            { nim: "G1A025007", na: 69.61, grade: "B" },
            { nim: "G1A025083", na: 69.52, grade: "B" },
            { nim: "G1A025152", na: 69.47, grade: "B" },
            { nim: "G1A025070", na: 69.43, grade: "B" },
            { nim: "G1A025171", na: 69.37, grade: "B" },
            { nim: "G1A025023", na: 68.66, grade: "B" },
            { nim: "G1A025124", na: 68.50, grade: "B" },
            { nim: "G1A025132", na: 68.18, grade: "B" },
            { nim: "G1A025141", na: 68.11, grade: "B" },
            { nim: "G1A025140", na: 67.98, grade: "B" },
            { nim: "G1A025146", na: 67.90, grade: "B" },
            { nim: "G1A025032", na: 67.61, grade: "B" },
            { nim: "G1A025024", na: 67.16, grade: "B" },
            { nim: "G1A025066", na: 66.99, grade: "B" },
            { nim: "G1A025107", na: 66.97, grade: "B" },
            { nim: "G1A025123", na: 66.89, grade: "B" },
            { nim: "G1A025166", na: 66.37, grade: "B" },
            { nim: "G1A025039", na: 66.01, grade: "B" },
            { nim: "G1A025053", na: 63.96, grade: "C" },
            { nim: "G1A025059", na: 63.95, grade: "C" },
            { nim: "G1A025043", na: 62.83, grade: "C" },
            { nim: "G1A025172", na: 61.93, grade: "C" },
            { nim: "G1A025011", na: 60.97, grade: "C" },
            { nim: "G1A025176", na: 60.42, grade: "C" },
            { nim: "G1A025157", na: 59.92, grade: "C" },
            { nim: "G1A025119", na: 58.14, grade: "C" },
            { nim: "G1A025167", na: 58.02, grade: "C" },
            { nim: "G1A025117", na: 57.67, grade: "C" },
            { nim: "G1A025046", na: 54.69, grade: "D" },
            { nim: "G1A025170", na: 53.84, grade: "D" },
            { nim: "G1A025036", na: 53.35, grade: "D" },
            { nim: "G1A025076", na: 53.30, grade: "D" },
            { nim: "G1A025034", na: 52.30, grade: "D" },
            { nim: "G1A025159", na: 50.33, grade: "D" },
            { nim: "G1A025164", na: 47.31, grade: "D" },
            { nim: "G1A025144", na: 47.02, grade: "D" },
            { nim: "G1A025050", na: 34.04, grade: "E" },
            { nim: "G1A025019", na: 28.07, grade: "E" },
            { nim: "G1A025161", na: 21.51, grade: "E" },
            { nim: "G1A025122", na: 21.36, grade: "E" },
            { nim: "G1A025162", na: 0.00, grade: "E" },
        ];

        // 2. Data Komponen (Blok 1.2)
        const rawComponentData = `
        G1A025001,88,78.33,95,60,60.8,70
        G1A025002,70,82.91,52,65,67.75,48
        G1A025003,58,61.67,85,77.5,77.8,61
        G1A025004,78.3,77.91,71,90,80.4,75
        G1A025005,73.3,57.08,70,70,72.5,60
        G1A025006,89.17,87.91,75.5,80,71,75.65
        G1A025007,76,54.58,85,60,68.6,80
        G1A025008,70.83,56.25,80,70,83.7,49
        G1A025009,84.16,70.41,90,80,84.3,65
        G1A025010,76.67,89.58,70,90,67.25,50
        G1A025011,62.5,41.25,85,67.5,49,72
        G1A025012,89.83,77.91,45,95,50,80.25
        G1A025013,80.5,81.25,75,100,50,84.2
        G1A025014,70.16,77,75,95,53,80.25
        G1A025015,79.16,60.41,70,75,80.4,78
        G1A025016,75.83,85,60,85,62,68.4
        G1A025017,84.16,80.41,75,75,63,88.8
        G1A025018,85.16,77.1,80,70,60,68.55
        G1A025019,7.91,6.25,9,5,36.6,15
        G1A025020,68.33,57.5,75,80,80.4,66
        G1A025021,78.3,68.75,90,85,80.4,86
        G1A025022,68,62.91,90,70,84.3,66
        G1A025023,44.5,71.25,56,52.5,82,58.15
        G1A025024,59.16,26.6,90,30,78.4,47
        G1A025025,93.33,95.83,90.5,90,60,90.8
        G1A025026,64.16,56.6,70,70,80.4,68
        G1A025027,82.66,82.92,49,75,54,62.55
        G1A025028,85.25,85,60,85,27,72.45
        G1A025029,79.33,89.58,77.5,95,68,79
        G1A025030,78.33,65,75,55,84.3,58
        G1A025031,79.67,91.67,86,80,64,81.6
        G1A025032,47.16,86.66,43,75,55,60.05
        G1A025033,73,81.25,81,90,76,59.25
        G1A025034,28.05,25,60,5,64.1,37
        G1A025035,87.33,85.8,85,85,85,76
        G1A025036,27.33,30.41,56,30,60.1,45
        G1A025037,74.16,77.5,90,75,73.2,61
        G1A025038,79.16,61.92,39,85,62.7,66
        G1A025039,80.41,70.41,50,60,65.4,64
        G1A025040,90,58.75,56,55,82.4,62
        G1A025041,76.67,75,66,65,77.8,67
        G1A025042,84,78.33,76,95,85.6,66
        G1A025043,56.67,60,47,60,57.5,54
        G1A025044,85,77.08,80,70,77.8,76
        G1A025045,82.93,94.58,52.5,80,76.25,82
        G1A025046,55,49.17,70,40,47.7,51
        G1A025047,70,65.83,75,95,87.6,61
        G1A025048,78.33,71.25,80,70,71.2,70
        G1A025049,76,60.83,90,75,87.6,71
        G1A025050,13.5,10.41,19,10,41.2,22
        G1A025051,64.2,72.08,49.5,65,69.1,69
        G1A025052,83.33,71.25,67,65,78.4,82
        G1A025053,47.5,32.5,85,22.5,68.6,61
        G1A025054,76.67,79.58,62,95,69.8,63
        G1A025055,70.17,83.75,71.5,85,69.7,68
        G1A025056,74.42,86.6,61.5,72.5,69.2,58
        G1A025057,83.3,64.38,80,82.5,79.7,52
        G1A025059,54.83,57.5,90,60,53.6,71
        G1A025060,88,87.5,90,90,82.4,62
        G1A025061,71.21,86.66,90,70,76.5,72
        G1A025062,68.83,62.92,60,70,79.1,66
        G1A025063,49.17,51.25,80,75,72.5,73
        G1A025064,67.5,75.41,90,70,86.3,51
        G1A025065,89.93,75.83,56.5,75,67.8,71
        G1A025066,8.33,47.5,65,70,64.1,85
        G1A025067,74.16,67.08,85,60,73.2,58
        G1A025068,81.83,98.75,71,85,82.95,37
        G1A025069,72.5,65.41,90,62.5,69.9,72
        G1A025070,73,52.91,80,75,85,70
        G1A025071,75.83,80,90,47.5,84.3,63
        G1A025072,59.2,68,71,85,72.3,61
        G1A025073,88.83,76.25,61.5,85,61.95,59
        G1A025074,80.83,67.5,80,75,80.4,58
        G1A025075,78.33,67.29,90,72.5,78.4,64
        G1A025076,40.83,34.17,61,45,49.7,53
        G1A025077,35,42.08,90,90,79.7,50
        G1A025078,74,76.67,75,90,80.85,84
        G1A025079,78.67,86.25,71.5,75,73.8,48
        G1A025080,73.83,77.91,52.5,90,73.75,32
        G1A025081,81.67,82.92,77,75,82.4,74
        G1A025082,54,87.08,52,60,72.45,52
        G1A025083,65.83,81.25,71,75,86.3,69
        G1A025084,67.83,73.3,53,85,71.1,68
        G1A025086,70,78.33,85,85,88.9,69
        G1A025087,53.75,61.15,81,80,68.6,70
        G1A025088,75.41,83.3,80,62.5,86.3,76
        G1A025089,82.08,80.42,85,90,87.6,75
        G1A025091,87.66,87.92,75,60,85.6,51
        G1A025092,89,92.91,81,80,71.75,56
        G1A025093,69,91.25,88,90,88.2,59
        G1A025094,80.5,76.66,73,70,88.2,82
        G1A025095,86.5,86.6,76,70,83.5,57
        G1A025096,75,77.9,90,95,85.6,69
        G1A025097,71.22,83.33,56.5,62.7,67.25,46
        G1A025098,66.67,56.25,73,70,76.5,57
        G1A025099,81.67,80.83,75,75,81,69
        G1A025100,68,85.41,61.5,70,73.7,76
        G1A025101,58,54.58,68,50,81.7,79
        G1A025102,60.66,77.5,80,75,75.1,37
        G1A025103,66.25,75,60,81.7,51,0
        G1A025104,86.97,82.08,81,75,75.85,40
        G1A025105,92.8,89.58,65,80,81.6,53
        G1A025106,89.6,87.08,55,90,74.45,70
        G1A025107,44.34,54.16,70,60,68,57
        G1A025108,76.5,69.16,47.5,80,73.1,54
        G1A025109,84.33,68.33,71.5,75,74.4,64
        G1A025110,75.17,59.58,48.5,60,84.8,36
        G1A025111,66,67.91,55,60,75.8,50
        G1A025112,85,81.67,66.5,75,62.6,51
        G1A025113,70.2,85.41,81,85,69.2,53
        G1A025114,88.67,77.08,43,80,63.15,68
        G1A025115,74.58,82.08,66,90,83.7,76
        G1A025116,54.16,65,90,80,85,69
        G1A025117,32.83,38.3,40,30,68.6,40
        G1A025118,64.16,68.75,90,85,85,67
        G1A025119,38,28.75,42,5,64.1,59
        G1A025120,66.33,57.08,75,70,84.3,71
        G1A025121,67.17,47.9,49,62.5,63.4,83
        G1A025122,10,7.5,33,0,24.8,30
        G1A025123,57.5,45.41,60,65,68,54
        G1A025124,42.5,33.3,55,25,81.7,56
        G1A025125,67.67,67.64,66,80,69.8,53
        G1A025126,69.16,50.83,50,70,75.8,57
        G1A025127,65.83,68.1,80,85,69.3,40
        G1A025128,73.5,75,75,62.5,75.2,54
        G1A025129,69.16,69.16,80,85,77.8,77
        G1A025130,65.33,60,85,60,65.4,62
        G1A025131,80,68.33,65,70,74.5,64
        G1A025132,20.83,40,48,40,77.1,66
        G1A025133,71.7,62.92,80,65,64.7,60
        G1A025134,70.83,52.9,90,50,83,58
        G1A025135,60.17,90.4,62,65,69.85,66
        G1A025136,75,52.08,75,35,79.1,55
        G1A025138,44.16,67.92,90,52.5,80.4,55
        G1A025139,74.17,71.67,52,92.5,88.9,72
        G1A025140,34.17,46.67,45,50,74.5,61
        G1A025141,56.25,46.67,55,50,72.5,56
        G1A025142,80.17,45.41,75,65,78.4,77
        G1A025143,69.67,73.95,90,70,81,81
        G1A025144,44.17,32.5,32,35,44.4,46
        G1A025145,69.33,87.91,62,75,78.95,71
        G1A025146,65,76.67,75.58,90,67.5,70
        G1A025147,63.33,63.33,75,75,58.2,58
        G1A025148,73.75,65.41,57,95,70.6,52
        G1A025149,65,75.41,80,85,81.7,66
        G1A025150,88.33,65,52,60,64.7,62
        G1A025151,67.83,73.75,57,70,65.95,77
        G1A025152,74.16,78.3,70,37.5,62.1,58
        G1A025153,40,59.16,65,65,70.6,63
        G1A025154,76.67,70,70,80,77.1,80
        G1A025155,66,77.5,90,90,81.7,69
        G1A025156,68.3,70,65,60,68.6,55
        G1A025157,29.16,35,85,70,66,40
        G1A025159,36.67,24.17,35,40,49.7,55
        G1A025160,75.83,68.33,75,50,81,61
        G1A025161,11.83,21.25,67,30,0,50
        G1A025163,81.33,68,75,90,88.9,60
        G1A025164,18,17.5,50,40,53.6,42
        G1A025165,73,75.8,88,85,78.4,60
        G1A025166,60,68.33,65,67.5,64.7,44
        G1A025167,24.16,22.08,50,12.5,69.9,56
        G1A025168,60.67,64.67,68,75,85.6,51
        G1A025169,58.33,57.91,75,40,73.2,62
        G1A025170,50,36.25,34,45,50.3,53
        G1A025171,52.5,58.75,48,35,71.9,58
        G1A025172,53.16,22.08,65,32.5,70.6,51
        G1A025173,59.1,65,67,60,78.4,75
        G1A025174,63.16,58.33,75,45,77.1,64
        G1A025175,73.67,60.83,80,77.5,77.8,43
        G1A025176,65.83,45.83,55,35,58.8,50
        `;

        // 3. Parser Logic (Blok 1.2)
        const compMap = {};
        rawComponentData.trim().split('\n').forEach(line => {
            const parts = line.trim().split(',');
            if(parts.length >= 7) {
                const nim = parts[0].trim();
                compMap[nim] = {
                    anat: parseFloat(parts[1]) || 0,
                    histo: parseFloat(parts[2]) || 0,
                    bio: parseFloat(parts[3]) || 0,
                    pk: parseFloat(parts[4]) || 0,
                    cbt: parseFloat(parts[5]) || 0,
                    soe: parseFloat(parts[6]) || 0
                };
            }
        });

        // 4. Merge Data & Assign Ranks
        let processedData = rankingData.map(student => {
            const comps = compMap[student.nim] || { anat:0, histo:0, bio:0, pk:0, cbt:0, soe:0 };
            return {
                ...student,
                name: nameMap[student.nim] || student.nim,
                ...comps
            };
        });

        // Sort Descending by NA
        processedData.sort((a, b) => b.na - a.na);

        // Assign Rank (handling ties) and Trend
        processedData.forEach((student, index) => {
            // Assign Rank
            if (index > 0 && processedData[index].na === processedData[index - 1].na) {
                student.rank = processedData[index - 1].rank;
            } else {
                student.rank = index + 1;
            }

            // Trend Logic
            const prevRank = block11Ranks[student.nim];
            if (prevRank) {
                student.prevRank = prevRank;
                student.rankDiff = prevRank - student.rank; // Positif means naik, negatif means turun
            } else {
                student.isNew = true;
            }
        });

        // --- 5. LOGIC GELAR (TITLES) ---
        const getTitles = (s) => {
            let titles = [];
            
            // Rank Titles
            if (s.rank === 1) titles.push({ text: "THE APEX PREDATOR", class: "bg-apex" });
            else if (s.rank <= 3) titles.push({ text: "PRODIGY", class: "bg-apex" });
            else if (s.rank <= 10) titles.push({ text: "ELITE", class: "bg-smart" });

            // Subject Titles
            if (s.anat >= 85) titles.push({ text: "Anatomy Ace", class: "bg-ace" });
            if (s.histo >= 85) titles.push({ text: "Histology Hero", class: "bg-ace" });
            if (s.bio >= 85) titles.push({ text: "Biochem Whiz", class: "bg-ace" });
            
            // Skill Titles
            if (s.pk >= 90) titles.push({ text: "Skill Master", class: "bg-genius" });
            if (s.cbt >= 85) titles.push({ text: "Theory King", class: "bg-genius" });
            
            // Overall
            if (s.na >= 80 && titles.length === 0) titles.push({ text: "High Achiever", class: "bg-smart" });

            return titles;
        }

        // --- Helper for Trend HTML ---
        const getTrendHTML = (s, isLarge = false) => {
            if (s.isNew) return `<span class="text-xs text-gray-500 italic">New Entry</span>`;
            
            const diff = s.rankDiff;
            const sizeClass = isLarge ? "text-sm px-3 py-1.5" : "text-[10px] px-1.5 py-0.5";
            
            if (diff > 0) {
                // Naik Ranking (Rank menjadi lebih kecil angkanya)
                return `<div class="flex items-center gap-1 font-bold rounded-full trend-up ${sizeClass}">
                            <i class="fa-solid fa-arrow-up"></i> ${diff}
                        </div>`;
            } else if (diff < 0) {
                // Turun Ranking
                return `<div class="flex items-center gap-1 font-bold rounded-full trend-down ${sizeClass}">
                            <i class="fa-solid fa-arrow-down"></i> ${Math.abs(diff)}
                        </div>`;
            } else {
                // Sama
                return `<div class="flex items-center gap-1 font-bold rounded-full trend-same ${sizeClass}">
                            <i class="fa-solid fa-minus"></i>
                        </div>`;
            }
        }

        // --- 6. RENDERING ---
        const podiumContainer = document.getElementById('podium-container');
        const gridContainer = document.getElementById('student-grid');

        function renderAll() {
            // Separate Top 3
            const top3 = processedData.slice(0, 3);
            // Reorder for Podium: 2nd, 1st, 3rd
            const podiumOrder = [top3[1], top3[0], top3[2]]; 
            
            let podiumHTML = `<div class="flex flex-col md:flex-row justify-center items-end gap-4">`;
            
            podiumOrder.forEach((s, i) => {
                const isFirst = i === 1;
                const podiumClass = isFirst ? 'podium-1' : (i === 0 ? 'podium-2' : 'podium-3');
                const medal = isFirst ? '' : (i === 0 ? '' : '');
                const titles = getTitles(s);
                const trend = getTrendHTML(s, true);

                podiumHTML += `
                <div onclick="openModal('${s.nim}')" class="glass-card ${podiumClass} w-full md:w-1/3 rounded-2xl p-6 flex flex-col items-center justify-center relative hover:bg-white/10 transition-all cursor-pointer">
                    <div class="absolute -top-6 text-4xl shadow-xl rounded-full bg-slate-800 p-2 border border-slate-600">${medal}</div>
                    <div class="mt-4 text-center w-full">
                        <div class="flex justify-between items-center w-full mb-1 px-2">
                            <div class="text-xs font-bold text-gray-400 tracking-widest uppercase">Rank ${s.rank}</div>
                            ${trend}
                        </div>
                        <h3 class="text-xl font-bold text-white leading-tight mb-1 line-clamp-1">${s.name}</h3>
                        <p class="text-xs text-gray-400 font-mono mb-3">${s.nim}</p>
                        <div class="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-400 mb-2">${s.na.toFixed(2)}</div>
                        <div class="flex flex-wrap justify-center gap-1">
                            ${titles.map(t => `<span class="badge-title ${t.class}">${t.text}</span>`).join('')}
                        </div>
                    </div>
                </div>`;
            });
            podiumHTML += `</div>`;
            podiumContainer.innerHTML = podiumHTML;

            // Render Rest
            const rest = processedData.slice(3);
            let gridHTML = '';
            rest.forEach(s => {
                const titles = getTitles(s);
                const gradeColor = s.grade === 'A' ? 'text-green-400' : (s.grade === 'B' ? 'text-blue-400' : 'text-yellow-400');
                const trend = getTrendHTML(s);
                
                gridHTML += `
                <div onclick="openModal('${s.nim}')" class="glass-card rounded-xl p-5 relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-3 opacity-10 text-6xl font-black group-hover:opacity-20 transition-opacity">#${s.rank}</div>
                    <div class="flex justify-between items-start mb-3">
                        <div class="pr-8">
                            <h4 class="font-bold text-white text-lg line-clamp-1 group-hover:text-blue-300 transition-colors">${s.name}</h4>
                            <p class="text-xs text-gray-400 font-mono">${s.nim}</p>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-end mb-2">
                        <div>
                            <span class="text-xs text-gray-500 uppercase block">Total Score</span>
                            <span class="text-3xl font-bold text-white">${s.na.toFixed(2)}</span>
                        </div>
                        <div class="text-right">
                            <span class="text-xs text-gray-500 uppercase block">Grade</span>
                            <span class="text-2xl font-bold ${gradeColor}">${s.grade}</span>
                        </div>
                    </div>

                    <div class="flex justify-between items-center border-t border-white/5 pt-3">
                        <div class="flex flex-wrap gap-1 min-h-[1.5rem]">
                            ${titles.length > 0 ? titles.map(t => `<span class="badge-title ${t.class}">${t.text}</span>`).join('') : ''}
                        </div>
                        <div>${trend}</div>
                    </div>
                </div>`;
            });
            gridContainer.innerHTML = gridHTML;
        }

        // --- 7. MODAL & CHART ---
        const modal = document.getElementById('modal');
        let chartInstance = null;

        window.openModal = (nim) => {
            const s = processedData.find(st => st.nim === nim);
            if(!s) return;

            document.getElementById('modal-name').innerText = s.name;
            document.getElementById('modal-nim').innerText = s.nim;
            document.getElementById('modal-na').innerText = s.na.toFixed(2);
            document.getElementById('modal-grade').innerText = s.grade;
            document.getElementById('modal-rank-badge').innerText = `RANK #${s.rank}`;
            
            // Trend in Modal
            let trendText = '';
            if (s.isNew) {
                trendText = `<span class="text-gray-400 italic">Data baru di blok ini</span>`;
            } else {
                if (s.rankDiff > 0) trendText = `<span class="text-emerald-400 font-bold"><i class="fa-solid fa-arrow-up"></i> Naik ${s.rankDiff} posisi</span> dari Rank ${s.prevRank}`;
                else if (s.rankDiff < 0) trendText = `<span class="text-rose-400 font-bold"><i class="fa-solid fa-arrow-down"></i> Turun ${Math.abs(s.rankDiff)} posisi</span> dari Rank ${s.prevRank}`;
                else trendText = `<span class="text-gray-400 font-bold"><i class="fa-solid fa-minus"></i> Posisi Tetap</span> (Sebelumnya Rank ${s.prevRank})`;
            }
            document.getElementById('modal-trend').innerHTML = `<div class="bg-white/5 p-3 rounded-lg border border-white/10 text-sm text-center">${trendText}</div>`;

            // Titles in Modal
            const titles = getTitles(s);
            document.getElementById('modal-titles').innerHTML = titles.map(t => `<span class="px-3 py-1 rounded-full text-xs font-bold border ${t.class}">${t.text}</span>`).join('');

            modal.classList.add('show');

            // Chart
            const ctx = document.getElementById('spiderwebChart').getContext('2d');
            if (chartInstance) chartInstance.destroy();

            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Anatomi', 'Histologi', 'Biokimia', 'PK', 'CBT', 'SOE'],
                    datasets: [{
                        label: 'Score',
                        data: [s.anat, s.histo, s.bio, s.pk, s.cbt, s.soe],
                        backgroundColor: 'rgba(56, 189, 248, 0.2)',
                        borderColor: '#38bdf8',
                        pointBackgroundColor: '#38bdf8',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#38bdf8',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: '#94a3b8', font: {size: 11} },
                            ticks: { display: false, backdropColor: 'transparent', max: 100 },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        };

        window.closeModal = () => {
            modal.classList.remove('show');
        };

        // --- 8. SEARCH ---
        document.getElementById('searchInput').addEventListener('keyup', (e) => {
            const term = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('#student-grid .glass-card');
            let found = false;

            cards.forEach(card => {
                const text = card.innerText.toLowerCase();
                if(text.includes(term)) {
                    card.style.display = "block";
                    found = true;
                } else {
                    card.style.display = "none";
                }
            });
            document.getElementById('not-found').style.display = found ? 'none' : 'block';
        });

        // Initialize
        renderAll();

    </script>
</body>
</html>
